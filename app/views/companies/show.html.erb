<div class="company-show-holder ">
  <div class="map-holder">
    <div id="map_show"></div>
  </div>

  <div class="company-holder flex-column page-margin">
    <div class="company-holder-info-bio">
      <div class="company-info-holder">
        <h1>
          <%= @company.name %>
        </h1>
        <h2>
          <a target="_blank" href="<%=@company.website%>">
            website
          </a>
        </h2>
        <h2>
          <%= @company.phone_number %>
        </h2>

        <div class="company-credit-card-holder">
          <h2>Credit Card:</h2>
          <% if @company.credit_card %>
            <h2 class="positive-font">
              Yes
            </h2>
            <% else %>
            <h2 class="negative-font">
              No
            </h2>
          <% end %>
        </div>

        <% if can? :update, @company %>
          <h2>
            <%= link_to 'edit profile', edit_company_path(@company) %>
          </h2>
        <% end %>
        <% if can? :destroy, @company %>
            <h2>
              <%= link_to "delete profile", company_path(@company), method: :delete, :class => "negative-font" %>
            </h2>
        <% end %>
      </div>

      <div class="company-bio-holder">
        <p>
          <%= @company.bio %>
        </p>
      </div>
    </div>

    <% if can? :update, @company %>
      <div class="company-trucks-holder flex-center-column">
      <h2>Trucks</h2>
      <% @trucks.each do |truck| %>
        <p>
          <%= truck.name %>
        </p>
      <% end %>
      </div>
    <% end %>

    <div class="company-comments-holder flex-center-column">
      <h2>
        <button class="btn btn-light" type="button" data-toggle="collapse" data-target="#collapse_comments" aria-expanded="false" aria-controls="collapseExample">
          Comments
        </button>
      </h2>

      <%= render :partial => "comments/comments", :locals => {:comments => @comments, :company => @company} %>
    </div>
  </div>
</div>

<script defer>
  handlerShow = Gmaps.build('Google');
  handlerShow.buildMap({ provider: {
    center: {lat: 38.9072, lng: -77.0369},
    zoom: 12,
    minZoom: 12,
    maxZoom: 16
  }, internal: {id: 'map_show'}}, function(){
    markers = handlerShow.addMarkers(<%=raw @hash.to_json %>);
    handlerShow.bounds.extendWith(markers);
    handlerShow.fitMapToBounds();
  });
</script>
